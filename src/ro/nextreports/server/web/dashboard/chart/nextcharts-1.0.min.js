function hsvToRgb(j,u,n){var a,k,m;var e;var l,d,c,o;j=Math.max(0,Math.min(360,j));u=Math.max(0,Math.min(100,u));n=Math.max(0,Math.min(100,n));u/=100;n/=100;if(u==0){a=k=m=n;return[Math.round(a*255),Math.round(k*255),Math.round(m*255)]}j/=60;e=Math.floor(j);l=j-e;d=n*(1-u);c=n*(1-u*l);o=n*(1-u*(1-l));switch(e){case 0:a=n;k=o;m=d;break;case 1:a=c;k=n;m=d;break;case 2:a=d;k=n;m=o;break;case 3:a=d;k=c;m=n;break;case 4:a=o;k=d;m=n;break;default:a=n;k=d;m=c}return[Math.round(a*255),Math.round(k*255),Math.round(m*255)]}function hsvToHex(d,c,a){var b=hsvToRgb(d,c,a);return rgbToHex(b[0],b[1],b[2])}function distinctHexColors(c){var a=[];for(var b=0;b<360;b+=360/c){a.push(hsvToHex(b,100,100))}return a}function colorLuminance(b,a){var f=colorToHex(b);f=String(f).replace(/[^0-9a-f]/gi,"");if(f.length<6){f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]}a=a||0;var d="#",g,e;for(e=0;e<3;e++){g=parseInt(f.substr(e*2,2),16);g=Math.round(Math.min(Math.max(0,g+(g*a)),255)).toString(16);d+=("00"+g).substr(g.length)}return d}function componentToHex(b){var a=b.toString(16);return a.length==1?"0"+a:a}function rgbToHex(d,c,a){return"#"+componentToHex(d)+componentToHex(c)+componentToHex(a)}function colorToHex(b){var a=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/.exec(b);return a?"#"+(1<<24|a[1]<<16|a[2]<<8|a[3]).toString(16).substr(1):b}function isCanvasEnabled(){return !!document.createElement("canvas").getContext}function niceNum(b,a){var e;var d;var c;e=Math.floor(getBaseLog(10,b));d=b/Math.pow(10,e);if(a){if(d<1.5){c=1}else{if(d<3){c=2}else{if(d<7){c=5}else{c=10}}}}else{if(d<=1){c=1}else{if(d<=2){c=2}else{if(d<=5){c=5}else{c=10}}}}return c*Math.pow(10,e)}function getBaseLog(a,b){return Math.log(b)/Math.log(a)}function calculateYStep(e,a,b){if(e==a){a=e+1}var c=niceNum(a-e,false);var g=niceNum(c/(b-1),true);var d=Math.floor(e/g)*g;var f=Math.ceil(a/g)*g;if((d==e)&&(d!=0)){d=d-g}return{minValY:d,maxValY:f,yStep:(f-d)/b}}function getMousePos(d,b){var a=$(window);var f=$(d).parent();var e,c;if(f.is("body")){e=b.clientX-d.offsetLeft+a.scrollLeft();c=b.clientY-d.offsetTop+a.scrollTop()}else{e=b.clientX-f.offset().left+a.scrollLeft();c=b.clientY-f.offset().top+a.scrollTop()}return{x:e,y:c}}function posTop(){return typeof window.pageYOffset!="undefined"?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}function posLeft(){return typeof window.pageYOffset!="undefined"?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}var handleMouseEvent={execute:function(a,d,n){var c=d.getContext("2d");d.style.left=(a.offsetLeft+this.mousePos.x)+"px";c.clearRect(0,0,d.width,d.height);var j=c.measureText(this.tooltip).width;var l=d.width/2-j/2;var k=40;var o=this.tooltip.split("<br>");if(o.length==1){d.width=j+20;l=d.width/2-j/2;c.fillText(this.tooltip,l,15)}else{var m=(o.length-1)*12;d.height=25+m;k+=m;var g=0;for(var e=0;e<o.length;e++){var h=c.measureText(o[e]).width;if(h>g){g=h}}if(d.width<=g){d.width=g+20}l=d.width/2-g/2;for(var e=0;e<o.length;e++){c.fillText(o[e],l,15+e*12)}}var b=d.offsetLeft+d.width;var f=a.offsetLeft+a.width;if(b>f){d.style.left=d.offsetLeft-(b-f)+"px"}d.style.top=(a.offsetTop+this.mousePos.y-k)+"px";if(this.tooltip==""){d.style.left="-2000px"}}};function drawEllipseByCenter(c,a,e,b,d){drawEllipse(c,a-b/2,e-d/2,b,d)}function drawUpperEllipseByCenter(c,a,e,b,d){drawUpperEllipse(c,a-b/2,e-d/2,b,d)}function drawEllipse(m,j,i,k,d){var g=0.5522848,c=(k/2)*g,a=(d/2)*g,l=j+k,f=i+d,e=j+k/2,b=i+d/2;m.moveTo(j,b);m.bezierCurveTo(j,b-a,e-c,i,e,i);m.bezierCurveTo(e+c,i,l,b-a,l,b);m.bezierCurveTo(l,b+a,e+c,f,e,f);m.bezierCurveTo(e-c,f,j,b+a,j,b)}function drawUpperEllipse(m,j,i,k,d){var g=0.5522848,c=(k/2)*g,a=(d/2)*g,l=j+k,f=i+d,e=j+k/2,b=i+d/2;m.moveTo(j,b);m.bezierCurveTo(j,b-a,e-c,i,e,i);m.bezierCurveTo(e+c,i,l,b-a,l,b)}function findControlPoint(d,c,b){var l=b.x-d.x,t=b.y-d.y,h=Math.sqrt(l*l+t*t),q={x:l/h,y:t/h},j=c.x-d.x,s=c.y-d.y,g=Math.sqrt(j*j+s*s),p={x:j/g,y:s/g},o=q.x*p.x+q.y*p.y,r={x:d.x+q.x*o*g,y:d.y+q.y*o*g},e=c.x-r.x,i=c.y-r.y,a=Math.sqrt(e*e+i*i),w={x:e/a,y:i/a},n={x:(d.x+b.x)/2,y:(d.y+b.y)/2},m={x:c.x+w.x*a,y:c.y+w.y*a},v=r.x-n.x,u=r.y-n.y,f={x:m.x+v,y:m.y+u};return f}function drawCurve(a,e,d,b){var c=findControlPoint(e,d,b);a.moveTo(e.x,e.y);a.quadraticCurveTo(c.x,c.y,b.x,b.y)}function formatNumber(b,a,d,e){var c=b.toFixed(a);c=c.replace(".",d);return addThousandSeparator(c,d,e)}function addThousandSeparator(c,b,d){c+="";x=c.split(b);x1=x[0];x2=x.length>1?b+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1"+d+"$2")}return x1+x2}function getParameterValueFromURL(c,b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+b+"=([^&#]*)";var e=new RegExp(a);var d=e.exec(c);if(d==null){return""}else{return d[1]}}function isPercent(b){if(b===undefined){return false}var a=b.indexOf("%");if(a==b.length-1){return true}return false}var barChart=function(myjson,idCan,idTipCan,canWidth,canHeight){var obj;var data;var labels;var labelOrientation;var globalAlpha;var showGridX;var showGridY;var background;var message;var tickCount;var showTicks;var chartType;var chartStyle;var seriesColor;var xData,yData;var series;var yStep;var maxK=new Array();var minK=new Array();var maxSum=new Array();var dotsK=new Array();var max;var min;var tickStep;var minValY;var maxValY;var step=0;var gap=40;var hStep=60;var titleSpace=0;var legendSpace=0;var xLegendSpace=0;var yLegendSpace=0;var xaxisY=0;var cornerRadius=6;var realWidth;var realHeight;var canvas;var c;var tipCanvas;var H=cornerRadius;var tickInit;var resizeWidth=false;var resizeHeight=false;function drawBar(myjson,idCan,idTipCan,canWidth,canHeight){canvas=document.getElementById(idCan);tipCanvas=document.getElementById(idTipCan);c=canvas.getContext("2d");obj=myjson;chartType=obj.type;if(typeof chartType==="undefined"){chartType="bar"}background=obj.background;if(typeof background==="undefined"){background="white"}chartStyle=obj.style;if(typeof chartStyle==="undefined"){chartStyle="normal"}data=obj.data[0];series=obj.data.length;labels=obj.labels;if(typeof labels==="undefined"){labels=[];for(var i=0;i<data.length;i++){labels.push("")}}labelOrientation=obj.labelOrientation;if(typeof labelOrientation==="undefined"){labelOrientation="horizontal"}globalAlpha=obj.alpha;if(typeof globalAlpha==="undefined"){globalAlpha=0.8}showTicks=obj.showTicks;if(typeof showTicks==="undefined"){showTicks=true}showGridX=obj.showGridX;if(typeof showGridX==="undefined"){showGridX=true}showGridY=obj.showGridY;if(typeof showGridY==="undefined"){showGridY=true}message=obj.message;if(typeof message==="undefined"){if(isStacked(chartType)){message="#val / #total"}else{message="#val"}}tickCount=obj.tickCount;if(typeof tickCount==="undefined"){tickCount=5}seriesColor=obj.color;if(typeof seriesColor==="undefined"){seriesColor=distinctHexColors(series)}for(var k=0;k<series;k++){maxK[k]=Math.max.apply(Math,obj.data[k]);minK[k]=Math.min.apply(Math,obj.data[k])}if(isStacked(chartType)){for(var i=0;i<data.length;i++){var sum=0;for(var k=0;k<series;k++){sum+=obj.data[k][i]}maxSum[i]=sum}max=Math.max.apply(Math,maxSum)}else{max=Math.max.apply(Math,maxK)}min=Math.min.apply(Math,minK);if(obj.lineData!==undefined){var lineMaxK=new Array();var lineMinK=new Array();for(var k=0;k<obj.lineData.length;k++){lineMaxK[k]=Math.max.apply(Math,obj.lineData[k]);lineMinK[k]=Math.min.apply(Math,obj.lineData[k])}var lineMin=Math.min.apply(Math,lineMinK);var lineMax=Math.max.apply(Math,lineMaxK);if(lineMin<min){min=lineMin}if(lineMax>max){max=lineMax}}var objStep=calculateYStep(min,max,tickCount);yStep=objStep.yStep;minValY=objStep.minValY;maxValY=objStep.maxValY;hStep=computeHStep();updateSize(canWidth,canHeight);canvas.addEventListener("mousemove",function(evt){var hme=Object.create(handleMouseEvent);hme.mousePos=getMousePos(canvas,evt);hme.tooltip=getTooltip(hme.mousePos);hme.execute(canvas,tipCanvas,evt)},false);canvas.addEventListener("click",onClick,false);if(resizeWidth||resizeHeight){window.addEventListener("resize",resizeCanvas,false)}drawChart()}function updateSize(canWidth,canHeight){if(canWidth!==undefined){if(isPercent(canWidth)){var percent=canWidth.substring(0,canWidth.length-1);var cl=canvas.parentNode;canvas.width=cl.offsetWidth*percent/100;resizeWidth=true}else{canvas.width=canWidth}}if(canHeight!==undefined){if(isPercent(canHeight)){var percent=canHeight.substring(0,canHeight.length-1);var cl=canvas.parentNode;canvas.height=cl.offsetHeight*percent/100;resizeHeight=true}else{canvas.height=canHeight}}if(isH(chartType)){if(typeof obj.legend!=="undefined"){computeVStep()}realHeight=canvas.width;realWidth=canvas.height-hStep/2;if(typeof obj.title!=="undefined"){realWidth=realWidth-getTitleSpace()}if(typeof obj.legend!=="undefined"){realWidth=realWidth-getLegendSpace()}xLegendSpace=getXLegendSpace();c.translate(canvas.width,canvas.height);c.scale(-1,1);c.rotate(-90*Math.PI/180)}else{realWidth=canvas.width;realHeight=canvas.height}gap=realWidth/10-10;tickInit=realHeight/12;tickStep=(realHeight-step-tickInit)/tickCount}function animDraw(){if(drawIt(H)){return false}H+=1+(realHeight-step-titleSpace-legendSpace)/30;window.requestAnimFrame(animDraw)}function drawIt(H){drawInit();var stop=drawData(true,false,"");drawGrid();drawAxis();return stop}function drawData(withFill,withClick,mousePos){var font=c.font;c.lineWidth=1;var stop=true;var acc=new Array();for(var i=0;i<data.length;i++){acc[i]=realHeight-step}var barTooltip="";var barValue;var abort=false;for(var k=0;k<series&&!abort;k++){for(var i=0;i<data.length&&!abort;i++){var dp=obj.data[k][i];if(isStacked(chartType)){if(k>0){for(var m=0;m<k;m++){dp+=obj.data[m][i]}}}var rectX=hStep+i*(realWidth-hStep)/data.length;var Yheight=realHeight-step-(dp-minValY)*tickStep/yStep;var rectY=realHeight-step-H;if(rectY<=Yheight){rectY=Yheight}else{stop=false}if(rectY+2>xaxisY){rectY=xaxisY-1;cornerRadius=1}else{cornerRadius=6}var rectWidth;if(isStacked(chartType)){rectWidth=(realWidth-hStep-gap*(1+Math.sqrt(series)))/data.length}else{rectWidth=(realWidth-hStep-gap*(1+Math.sqrt(series)))/data.length/series;rectX=rectX+k*rectWidth}var lColor=colorLuminance(seriesColor[k],1.3);var grad=c.createLinearGradient(rectX,realWidth-hStep,rectX+rectWidth,realWidth-hStep);grad.addColorStop(0,lColor);grad.addColorStop(1,seriesColor[k]);var inverseGrad=c.createLinearGradient(rectX,realWidth-hStep,rectX+rectWidth,realWidth-hStep);inverseGrad.addColorStop(0,seriesColor[k]);inverseGrad.addColorStop(1,lColor);if(chartStyle=="glass"){acc[i]=drawGlass(k,i,rectX,rectY,rectWidth,grad,acc[i],withFill)}else{if(chartStyle=="cylinder"){acc[i]=drawCylinder(k,i,rectX,rectY,rectWidth,grad,inverseGrad,acc[i],withFill)}else{if(chartStyle=="dome"){acc[i]=drawDome(k,i,rectX,rectY,rectWidth,inverseGrad,stop,acc[i],withFill)}else{if(chartStyle=="parallelipiped"){acc[i]=drawParallelipiped(k,i,rectX,rectY,rectWidth,grad,inverseGrad,stop,acc[i],withFill)}else{acc[i]=drawRectangle(k,i,rectX,rectY,rectWidth,acc[i],withFill)}}}}if(!withFill){if(c.isPointInPath(mousePos.x,mousePos.y)){var tValue=obj.data[k][i];if(obj.tooltipPattern!==undefined){tValue=formatNumber(tValue,obj.tooltipPattern.decimals,obj.tooltipPattern.decimalSeparator,obj.tooltipPattern.thousandSeparator)}if(withClick){barValue=tValue;if(obj.lineData!==undefined){abort=true}else{return tValue}}else{var mes=String(message).replace("#val",tValue);var mes=mes.replace("#total",maxSum[i]);canvas.style.cursor="pointer";barTooltip=mes;if(obj.lineData!==undefined){abort=true}else{return mes}}}else{canvas.style.cursor="default"}}}}if(obj.lineData!==undefined){for(var k=0;k<obj.lineData.length;k++){dotsK[k]=[];for(var i=0;i<obj.lineData[0].length;i++){var dp=obj.lineData[k][i];var width=(realWidth-hStep-gap*(1+Math.sqrt(obj.lineData.length)))/obj.lineData[0].length;var dotX=hStep+i*(realWidth-hStep)/obj.lineData[0].length+width/2;var Yheight=realHeight-step-(dp-minValY)*tickStep/yStep;var dotY=realHeight-step-H;var dotX2=dotX;var dotY2=dotY;var Yheight2=Yheight;if(i<obj.lineData[0].length-1){dotX2=hStep+(i+1)*(realWidth-hStep)/obj.lineData[0].length+width/2;dotY2=realHeight-step-H;Yheight2=realHeight-step-(obj.lineData[k][i+1]-minValY)*tickStep/yStep}if(dotY<=Yheight){dotY=Yheight}else{stop=false}if(dotY+2>xaxisY){dotY=xaxisY-1}if(i<obj.lineData[0].length-1){if(dotY2<=Yheight2){dotY2=Yheight2}else{stop=false}if(dotY2+2>xaxisY){dotY2=xaxisY-1}}dotsK[k].push({x:dotX,y:dotY});var lineSeriesColor=obj.lineColor;if(obj.lineColor===undefined){lineSeriesColor=distinctHexColors(obj.lineData[0].length)}var savedStroke=c.strokeStyle;drawLineElements(c,"normal","line",2,lineSeriesColor,dotsK,obj.lineData[0].length,xaxisY,globalAlpha,k,i,dotX,dotY,dotX2,dotY2,withFill);c.strokeStyle=savedStroke;if(!withFill){if(c.isPointInPath(mousePos.x,mousePos.y)){var tValue=obj.lineData[k][i];if(obj.tooltipPattern!==undefined){tValue=formatNumber(tValue,obj.tooltipPattern.decimals,obj.tooltipPattern.decimalSeparator,obj.tooltipPattern.thousandSeparator)}if(withClick){return tValue}else{var lineMessage="#val";var mes=String(lineMessage).replace("#val",tValue);canvas.style.cursor="pointer";return mes}}else{if(abort==true){canvas.style.cursor="pointer"}else{canvas.style.cursor="default"}}}}}}if(withFill){return stop}else{if(withClick){if(barValue!==undefined){return barValue}}return barTooltip}}function drawRectangle(k,i,rectX,rectY,rectWidth,acci,withFill){c.beginPath();c.moveTo(rectX,rectY);c.lineTo(rectX+rectWidth,rectY);c.lineTo(rectX+rectWidth,acci);c.lineTo(rectX,acci);c.lineTo(rectX,rectY);if(isStacked(chartType)){acci=rectY}if(withFill){c.fillStyle=seriesColor[k];c.globalAlpha=globalAlpha;c.fill();c.globalAlpha=1}return acci}function drawCylinder(k,i,rectX,rectY,rectWidth,grad,inverseGrad,acci,withFill){if(withFill){c.beginPath();var radius=rectWidth/2/Math.sin(Math.PI/8);c.arc(rectX+rectWidth/2,rectY-radius*Math.cos(Math.PI/8),radius,3*Math.PI/8,5*Math.PI/8);if(isStacked(chartType)){c.lineTo(rectX,acci);c.arc(rectX+rectWidth/2,acci-radius*Math.cos(Math.PI/8),radius,5*Math.PI/8,3*Math.PI/8,true);acci=rectY}else{c.lineTo(rectX,realHeight-step);c.arc(rectX+rectWidth/2,realHeight-step-radius*Math.cos(Math.PI/8),radius,5*Math.PI/8,3*Math.PI/8,true)}c.lineTo(rectX+rectWidth,rectY);c.stroke();c.closePath();if(withFill){c.fillStyle=inverseGrad;c.globalAlpha=globalAlpha;c.fill();c.globalAlpha=1}c.beginPath();if(isStacked(chartType)){c.arc(rectX+rectWidth/2,acci+radius*Math.cos(Math.PI/8),radius,11*Math.PI/8,13*Math.PI/8);c.stroke();c.arc(rectX+rectWidth/2,rectY-radius*Math.cos(Math.PI/8),radius,3*Math.PI/8,5*Math.PI/8)}else{c.arc(rectX+rectWidth/2,rectY+radius*Math.cos(Math.PI/8),radius,11*Math.PI/8,13*Math.PI/8);c.stroke();c.arc(rectX+rectWidth/2,rectY-radius*Math.cos(Math.PI/8),radius,3*Math.PI/8,5*Math.PI/8)}c.closePath();c.fillStyle=grad;c.globalAlpha=globalAlpha;c.fill();c.globalAlpha=1}else{c.beginPath();var radius=rectWidth/2/Math.sin(Math.PI/8);if((series==1)||(k==series-1)){c.arc(rectX+rectWidth/2,rectY+radius*Math.cos(Math.PI/8),radius,13*Math.PI/8,11*Math.PI/8,true)}else{c.arc(rectX+rectWidth/2,rectY-radius*Math.cos(Math.PI/8),radius,3*Math.PI/8,5*Math.PI/8)}if(isStacked(chartType)){c.lineTo(rectX,acci);c.arc(rectX+rectWidth/2,acci-radius*Math.cos(Math.PI/8),radius,5*Math.PI/8,3*Math.PI/8,true);acci=rectY}else{c.lineTo(rectX,realHeight-step);c.arc(rectX+rectWidth/2,realHeight-step-radius*Math.cos(Math.PI/8),radius,5*Math.PI/8,3*Math.PI/8,true)}c.lineTo(rectX+rectWidth,rectY)}return acci}function drawGlass(k,i,rectX,rectY,rectWidth,grad,acci,withFill){if(withFill){c.fillStyle=grad}c.beginPath();if(rectWidth<=2*cornerRadius*series){cornerRadius=2}c.moveTo(rectX+cornerRadius,rectY);c.lineTo(rectX+rectWidth-cornerRadius,rectY);if(!isStacked(chartType)||(k==series-1)){c.arcTo(rectX+rectWidth,rectY,rectX+rectWidth,rectY+cornerRadius,cornerRadius)}else{c.lineTo(rectX+rectWidth,rectY)}if(isStacked(chartType)){c.lineTo(rectX+rectWidth,acci);c.lineTo(rectX,acci);acci=rectY}else{c.lineTo(rectX+rectWidth,realHeight-step);c.lineTo(rectX,realHeight-step)}if(!isStacked(chartType)||(k==series-1)){c.lineTo(rectX,rectY+cornerRadius);c.arcTo(rectX,rectY,rectX+rectWidth-cornerRadius,rectY,cornerRadius)}else{c.lineTo(rectX,rectY)}if(withFill){c.closePath();c.stroke();c.globalAlpha=globalAlpha;c.fill();c.globalAlpha=1}return acci}function drawDome(k,i,rectX,rectY,rectWidth,inverseGrad,stop,acci,withFill){if(withFill){c.fillStyle=inverseGrad;c.beginPath();var topRadius=rectWidth/2;var radius=rectWidth/2/Math.sin(Math.PI/8);var value=(obj.data[k][i]-minValY)*tickStep/yStep;var maxValue=(maxSum[i]-minValY)*tickStep/yStep;var isEllipse=false;if((series==1)||(k==series-1)||(chartType=="bar")){var drawDome=!isStacked(chartType)||(isStacked(chartType)&&stop);if(drawDome){if(topRadius<=value){c.arc(rectX+rectWidth/2,rectY+topRadius,topRadius,2*Math.PI,Math.PI,true)}else{drawUpperEllipse(c,rectX,rectY,rectWidth,2*value);isEllipse=true}}}else{c.arc(rectX+rectWidth/2,rectY+radius*Math.cos(Math.PI/8),radius,13*Math.PI/8,11*Math.PI/8,true)}if(isStacked(chartType)){if(isEllipse==true){c.arc(rectX+rectWidth/2,acci-radius*Math.cos(Math.PI/8),radius,3*Math.PI/8,5*Math.PI/8)}else{c.arc(rectX+rectWidth/2,acci-radius*Math.cos(Math.PI/8),radius,5*Math.PI/8,3*Math.PI/8,true)}acci=rectY}else{c.lineTo(rectX,realHeight-step);c.arc(rectX+rectWidth/2,realHeight-step-radius*Math.cos(Math.PI/8),radius,5*Math.PI/8,3*Math.PI/8,true)}if((series==1)||(k==series-1)||(chartType=="bar")){var drawDome=!isStacked(chartType)||(isStacked(chartType)&&stop);if(drawDome){if(topRadius<=value){c.lineTo(rectX+rectWidth,rectY+topRadius)}else{c.lineTo(rectX,rectY+value)}}}else{c.lineTo(rectX+rectWidth,rectY)}c.stroke();c.closePath();c.globalAlpha=globalAlpha;c.fill();c.globalAlpha=1}else{c.beginPath();var topRadius=rectWidth/2;var radius=rectWidth/2/Math.sin(Math.PI/8);var value=(obj.data[k][i]-minValY)*tickStep/yStep;var isEllipse=false;if((series==1)||(k==series-1)||(chartType=="bar")){var drawDome=!isStacked(chartType)||(isStacked(chartType)&&stop);if(drawDome){if(topRadius<value){c.arc(rectX+rectWidth/2,rectY+topRadius,topRadius,2*Math.PI,Math.PI,true)}else{drawUpperEllipse(c,rectX,rectY,rectWidth,2*value);isEllipse=true}}}else{c.arc(rectX+rectWidth/2,rectY-radius*Math.cos(Math.PI/8),radius,5*Math.PI/8,3*Math.PI/8,true)}if(isStacked(chartType)){if((series==1)||(k==series-1)){if(isEllipse==true){c.arc(rectX+rectWidth/2,acci-radius*Math.cos(Math.PI/8),radius,3*Math.PI/8,5*Math.PI/8)}else{c.arc(rectX+rectWidth/2,acci-radius*Math.cos(Math.PI/8),radius,5*Math.PI/8,3*Math.PI/8,true)}acci=rectY}else{if(isEllipse==true){c.lineTo(rectX,acci);c.arc(rectX+rectWidth/2,realHeight-step-radius*Math.cos(Math.PI/8),radius,13*Math.PI/8,11*Math.PI/8,true)}else{c.lineTo(rectX+rectWidth,acci);c.arc(rectX+rectWidth/2,realHeight-step-radius*Math.cos(Math.PI/8),radius,3*Math.PI/8,5*Math.PI/8)}}}else{c.lineTo(rectX,realHeight-step);c.arc(rectX+rectWidth/2,realHeight-step-radius*Math.cos(Math.PI/8),radius,5*Math.PI/8,3*Math.PI/8,true)}if((series==1)||(k==series-1)||(chartType=="bar")){var drawDome=!isStacked(chartType)||(isStacked(chartType)&&stop);if(drawDome){if(topRadius<=value){c.lineTo(rectX+rectWidth,rectY+topRadius)}}}else{c.lineTo(rectX,rectY)}}return acci}function drawParallelipiped(k,i,rectX,rectY,rectWidth,grad,inverseGrad,stop,acci,withFill){var p=gap/4;var value=(obj.data[k][i]-minValY)*tickStep/yStep;if(withFill){c.fillStyle=grad;c.lineWidth=0.2;c.moveTo(rectX+p,rectY);c.lineTo(rectX+p,acci);if(k==0){c.lineTo(rectX,acci+p);c.moveTo(rectX+p,acci);c.lineTo(rectX+rectWidth+p,acci)}c.stroke();c.lineWidth=0.5;c.beginPath();c.moveTo(rectX,rectY+p);c.lineTo(rectX+rectWidth,rectY+p);c.lineTo(rectX+rectWidth,acci+p);c.lineTo(rectX,acci+p);c.lineTo(rectX,rectY+p);c.closePath();c.stroke();c.globalAlpha=globalAlpha;c.fill();c.globalAlpha=1;c.fillStyle=inverseGrad;c.beginPath();c.moveTo(rectX,rectY+p);c.lineTo(rectX+p,rectY);c.lineTo(rectX+rectWidth+p,rectY);c.lineTo(rectX+rectWidth,rectY+p);c.lineTo(rectX,rectY+p);c.closePath();c.stroke();c.globalAlpha=globalAlpha;c.fill();c.globalAlpha=1;c.fillStyle=inverseGrad;c.beginPath();c.moveTo(rectX+rectWidth+p,rectY);if(isStacked(chartType)){var m=H;if(m>value){m=value}c.lineTo(rectX+rectWidth+p,rectY+m);c.lineTo(rectX+rectWidth,rectY+p+m)}else{c.lineTo(rectX+rectWidth+p,acci);c.lineTo(rectX+rectWidth,acci+p)}c.lineTo(rectX+rectWidth,rectY+p);c.lineTo(rectX+rectWidth+p,rectY);c.closePath();c.stroke();c.globalAlpha=globalAlpha;c.fill();c.globalAlpha=1;if(isStacked(chartType)){acci=rectY}}else{c.beginPath();c.moveTo(rectX,rectY+p);if((series==1)||(k==series-1)||(chartType=="bar")){c.lineTo(rectX+p,rectY-p);if((chartType=="bar")&&(series>1)&&(k<series-1)){var nextValue=(obj.data[k+1][i]-minValY)*tickStep/yStep;if(value<=nextValue){c.lineTo(rectX+rectWidth,rectY-p)}else{c.lineTo(rectX+rectWidth+p,rectY-p)}}else{c.lineTo(rectX+rectWidth+p,rectY-p)}}else{c.lineTo(rectX+rectWidth,rectY);c.lineTo(rectX+rectWidth+p,rectY-p)}if((chartType=="bar")&&(series>1)&&(k<series-1)){var nextValue=(obj.data[k+1][i]-minValY)*tickStep/yStep;if(value<=nextValue){c.lineTo(rectX+rectWidth,acci+p)}else{c.lineTo(rectX+rectWidth+p,acci-nextValue-p);c.lineTo(rectX+rectWidth,acci-nextValue);c.lineTo(rectX+rectWidth,acci+p)}}else{c.lineTo(rectX+rectWidth+p,acci);c.lineTo(rectX+rectWidth,acci+p)}c.lineTo(rectX,acci+p);c.lineTo(rectX,rectY+p);if(isStacked(chartType)){acci=rectY}}return acci}function drawInit(){var font=c.font;c.fillStyle=background;if(isH(chartType)){c.fillRect(0,0,realWidth+getTitleSpace()+step,realHeight)}else{c.fillRect(0,0,realWidth,realHeight)}var xLabelWidth=computeVStep();if(typeof obj.title!=="undefined"){var titleColor=obj.title.color;if(titleColor===undefined){titleColor="#000000"}c.fillStyle=titleColor;var b=" ";var f=obj.title.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}c.font=f.weight+b+f.size+"px"+b+f.family;if(!isH(chartType)){titleSpace=+20+ +f.size}else{titleSpace=10}var alignment=obj.title.alignment;if(alignment===undefined){alignment="center"}var xTitle;if(alignment=="left"){xTitle=hStep}else{if(alignment=="right"){xTitle=canvas.width-c.measureText(obj.title.text).width-10}else{xTitle=canvas.width/2-c.measureText(obj.title.text).width/2}}if(isH(chartType)){c.save();c.translate(0,realHeight/2);c.scale(1,-1);var xoff=0;if(chartType=="hstackedbar"){xoff=7}else{xoff=11}var leg=0;if(typeof obj.legend!=="undefined"){leg=getLegendSpace()}if(showTicks==false){leg=leg+titleSpace+20}c.translate(realWidth+hStep+titleSpace+xoff-yLegendSpace+leg,-realHeight/2);c.rotate(Math.PI/2)}c.fillText(obj.title.text,xTitle,20+titleSpace/2);c.font=font;if(isH(chartType)){c.restore()}}else{titleSpace=10}if(typeof obj.xLegend!=="undefined"){var xLegendColor=obj.xLegend.color;if(xLegendColor===undefined){xLegendColor="#000000"}c.fillStyle=xLegendColor;var b=" ";var f=obj.xLegend.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}c.font=f.weight+b+f.size+"px"+b+f.family;xLegendSpace=+20+ +f.size;if(isH(chartType)){c.save();c.translate(0,realHeight);c.scale(1,-1);var x=0;if(typeof obj.legend!=="undefined"){x=c.measureText(obj.xLegend.text).width/2}else{if(typeof obj.title!=="undefined"){x=titleSpace}}c.translate(x,-realHeight+f.size/2+xLegendSpace)}c.fillText(obj.xLegend.text,realWidth/2-c.measureText(obj.xLegend.text).width/2,realHeight-f.size);c.font=font;if(isH(chartType)){c.restore()}}else{xLegendSpace=0}if(typeof obj.yLegend!=="undefined"){var yLegendColor=obj.yLegend.color;if(yLegendColor===undefined){yLegendColor="#000000"}var b=" ";var f=obj.yLegend.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}c.font=f.weight+b+f.size+"px"+b+f.family;c.fillStyle=yLegendColor;c.save();c.translate(10,realHeight/2);c.rotate(-Math.PI/2);c.textAlign="center";if(isH(chartType)){c.translate(0,realHeight);c.scale(1,-1);var ypos=realHeight-f.size/2-xLegendSpace/2;if((typeof obj.title==="undefined")&&(xLegendSpace==0)){ypos=ypos-f.size}c.translate(0,ypos)}c.fillText(obj.yLegend.text,0,f.size);c.restore();c.font=font}else{yLegendSpace=0}if(typeof obj.legend!=="undefined"){var x=hStep;if(isH(chartType)){x=step}c.font="bold 10px sans-serif";legendSpace=20;var legendY=titleSpace+20;c.globalAlpha=globalAlpha;for(var k=0;k<series;k++){c.fillStyle=seriesColor[k];var legendWidth=c.measureText(obj.legend[k]).width+24;if(isH(chartType)){if(x+legendWidth>realHeight){x=step;legendY=legendY+14}c.save();c.translate(0,realHeight/2);c.scale(1,-1);var xoff=0;if(chartType=="hstackedbar"){xoff=28}else{xoff=26}c.translate(realWidth+hStep/2+xoff-yLegendSpace/2+legendSpace,-realHeight/2);c.rotate(Math.PI/2)}else{if(x+legendWidth>realWidth){x=hStep;legendY=legendY+14;if(!isH(chartType)){legendSpace+=20}}}c.fillText("---- "+obj.legend[k],x,legendY);x=x+legendWidth;if(isH(chartType)){c.restore()}}if(obj.lineLegend!==undefined){var lineSeriesColor=obj.lineColor;if(obj.lineColor===undefined){lineSeriesColor=distinctHexColors(obj.lineData[0].length)}for(var k=0;k<obj.lineData.length;k++){c.fillStyle=lineSeriesColor[k];var legendWidth=c.measureText(obj.lineLegend[k]).width+24;if(x+legendWidth>realWidth){x=hStep;legendY=legendY+14;legendSpace+=20}c.fillText("---- "+obj.lineLegend[k],x,legendY);x=x+legendWidth}}c.globalAlpha=1;c.font=font}c.font=font;tickStep=(realHeight-step-titleSpace-legendSpace-tickInit)/tickCount;xaxisY=tickCount*tickStep+tickInit+titleSpace+legendSpace;drawLabels(xLabelWidth)}function drawLabels(xLabelWidth){var font=c.font;if(showTicks){c.fillStyle="black";if(obj.yData!==undefined){c.fillStyle=obj.yData.color;var b=" ";var yfont=obj.yData.font;c.font=yfont.weight+b+yfont.size+"px"+b+yfont.family}for(var i=0;i<tickCount+1;i++){var label;if(obj.tooltipPattern!==undefined){var decimals=obj.tooltipPattern.decimals;var exp=Math.pow(10,decimals);label=Math.round((maxValY-i*yStep)*exp)/exp}else{label=Math.round((maxValY-i*yStep)*100)/100}var labelWidth=c.measureText(label).width;if(isH(chartType)){c.save();var size=20;if(obj.yData!==undefined){size=obj.yData.font.size}c.scale(-1,1);c.translate(-realHeight+step-5-yLegendSpace+(tickCount-i)*tickStep,i*tickStep+tickInit+hStep+1-5*labelWidth/6+step-xLabelWidth-xLegendSpace+legendSpace);c.rotate(-Math.PI/2)}c.fillText(label+"",hStep-15-labelWidth,i*tickStep+tickInit+titleSpace+legendSpace);if(isH(chartType)){c.restore()}c.lineWidth=2;c.beginPath();c.moveTo(hStep-15,i*tickStep+tickInit+titleSpace+legendSpace);c.lineTo(hStep-10,i*tickStep+tickInit+titleSpace+legendSpace);c.closePath();c.stroke()}c.font=font}c.fillStyle="black";if(obj.xData!==undefined){c.fillStyle=obj.xData.color;var b=" ";var xfont=obj.xData.font;c.font=xfont.weight+b+xfont.size+"px"+b+xfont.family}for(var i=0;i<labels.length;i++){var middleX=hStep+i*(realWidth-hStep)/data.length+(realWidth-hStep-gap*(1+Math.sqrt(series)))/data.length/2;if(isH(chartType)){c.save();c.scale(1,-1);c.translate(0,-2*realHeight+xLabelWidth+3*xLegendSpace/2);var size=20;if(obj.xData!==undefined){size=obj.xData.font.size}c.translate(realHeight-step-size/2+middleX+xLabelWidth/2+xLegendSpace/2,realHeight-middleX-c.measureText(labels[i]).width/2-size/2-xLegendSpace/2);c.rotate(Math.PI/2);c.fillText(labels[i],middleX-c.measureText(labels[i]).width/2,realHeight-step/2-2);c.restore()}else{var xLabelSpace=computeXLabelSpace(labels[i]);if(labelOrientation=="vertical"){c.save();c.translate(middleX-c.measureText(labels[i]).width/2,realHeight-step/2-xLegendSpace/2);c.rotate(-Math.PI/2);c.textAlign="center";c.fillText(labels[i],0,c.measureText(labels[i]).width/2+6);c.restore()}else{if(labelOrientation=="diagonal"){c.save();c.translate(middleX-c.measureText(labels[i]).width/2,realHeight-step/2-xLegendSpace/2-5);c.rotate(-Math.PI/4);c.textAlign="center";c.fillText(labels[i],0,16);c.restore()}else{if(labelOrientation=="halfdiagonal"){c.save();c.translate(middleX-c.measureText(labels[i]).width/2,realHeight-step+10);c.rotate(-Math.PI/8);c.textAlign="center";c.fillText(labels[i],0,16);c.restore()}else{c.fillText(labels[i],middleX-c.measureText(labels[i]).width/2,realHeight-step/2-xLegendSpace/4)}}}}}c.font=font}function drawGrid(){if(showGridY){for(var i=0;i<tickCount+1;i++){var xColor=c.strokeStyle;if(obj.colorGridY!=="undefined"){c.strokeStyle=obj.colorGridY}c.lineWidth=0.2;c.beginPath();c.moveTo(hStep-10,i*tickStep+tickInit+titleSpace+legendSpace);c.lineTo(realWidth-10,i*tickStep+tickInit+titleSpace+legendSpace);c.closePath();c.stroke();c.lineWidth=2;c.strokeStyle=xColor}}if(showGridX){for(var i=0;i<labels.length;i++){var middleX=hStep+i*(realWidth-hStep)/data.length+(realWidth-hStep-gap*(1+Math.sqrt(series)))/data.length/2;var yColor=c.strokeStyle;if(obj.colorGridX!=="undefined"){c.strokeStyle=obj.colorGridX}c.lineWidth=0.2;c.beginPath();c.moveTo(middleX,10+titleSpace+legendSpace);c.lineTo(middleX,realHeight-step);c.closePath();c.stroke();c.lineWidth=2;c.strokeStyle=yColor}}}function drawAxis(){c.fillStyle="black";c.lineWidth=2;var axisColor=c.strokeStyle;if(obj.colorYaxis!=="undefined"){c.strokeStyle=obj.colorYaxis}c.beginPath();c.moveTo(hStep-10,titleSpace+legendSpace);c.lineTo(hStep-10,realHeight-step);c.closePath();c.stroke();if(obj.colorXaxis!=="undefined"){c.strokeStyle=obj.colorXaxis}c.beginPath();c.moveTo(hStep-10,realHeight-step);if(isH(chartType)){c.lineTo(realWidth,realHeight-step)}else{c.lineTo(realWidth-5,realHeight-step)}c.closePath();c.stroke();c.strokeStyle=axisColor}function getTooltip(mousePos){return drawData(false,false,mousePos)}function onClick(evt){var v=drawData(false,true,getMousePos(canvas,evt));if((v!=="")&&(obj.onClick!==undefined)){var f=obj.onClick;eval(f);doClick(v)}return v}function drawChart(){window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1000/60)}})();window.requestAnimFrame(animDraw)}function computeHStep(){var result;var font=c.font;if(showTicks){var maxLabelWidth=0;if(typeof obj.yData!=="undefined"){var yfont=obj.yData.font;var b=" ";c.font=yfont.weight+b+yfont.size+"px"+b+yfont.family}for(var i=0;i<tickCount+1;i++){var label=Math.round((maxValY-i*yStep)*100)/100;var labelWidth=c.measureText(label).width;if(labelWidth>maxLabelWidth){maxLabelWidth=labelWidth}}result=maxLabelWidth+20}else{result=20}c.font=font;if(typeof obj.yLegend!=="undefined"){var b=" ";var f=obj.yLegend.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}c.font=f.weight+b+f.size+"px"+b+f.family;yLegendSpace=+20+ +f.size;c.font=font;result+=yLegendSpace}return result}function computeVStep(){var xLabelWidth=0;if(typeof obj.xData!=="undefined"){var xfont=obj.xData.font;var b=" ";c.font=xfont.weight+b+xfont.size+"px"+b+xfont.family}for(var i=0;i<labels.length;i++){var labelWidth=computeXLabelSpace(labels[i]);if(labelWidth>xLabelWidth){xLabelWidth=labelWidth}}var _xLegendSpace=0;if(typeof obj.xLegend!=="undefined"){var f=obj.xLegend.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}_xLegendSpace=+20+ +f.size}if(step<xLabelWidth+_xLegendSpace){step=xLabelWidth+_xLegendSpace}return xLabelWidth}function computeXLabelSpace(label){var _labelWidth=c.measureText(label).width+10;if(!isH(chartType)){if(labelOrientation==="horizontal"){if(typeof obj.xData!=="undefined"){_labelWidth=obj.xData.font.size+20}else{_labelWidth=12+20}}else{if(labelOrientation==="halfdiagonal"){_labelWidth=c.measureText(label).width*Math.sin(Math.PI/8)+20}else{if(labelOrientation==="diagonal"){_labelWidth=c.measureText(label).width*Math.sin(Math.PI/4)+20}}}}return _labelWidth}function getTitleSpace(){var space=10;if(typeof obj.title!=="undefined"){var f=obj.title.font;if(f===undefined){f.size=12}space=+20+ +f.size}return space}function getXLegendSpace(){var _xLegendSpace=0;if(typeof obj.xLegend!=="undefined"){var f=obj.xLegend.font;if(f===undefined){f.size=12}_xLegendSpace=+20+ +f.size}return _xLegendSpace}function getLegendSpace(){var font=c.font;var _legendSpace=20;if(typeof obj.legend!=="undefined"){var x=hStep;if(isH(chartType)){x=step}c.font="bold 10px sans-serif";var legendY=getTitleSpace()+20;for(var k=0;k<series;k++){var legendWidth=c.measureText(obj.legend[k]).width+24;if(isH(chartType)){if(x+legendWidth>realHeight){x=step;legendY=legendY+14}}else{if(x+legendWidth>realWidth){x=hStep;legendY=legendY+14;if(!isH(chartType)){_legendSpace+=20}}}x=x+legendWidth}if(obj.lineLegend!==undefined){for(var k=0;k<obj.lineData.length;k++){var legendWidth=c.measureText(obj.lineLegend[k]).width+24;if(x+legendWidth>realWidth){x=hStep;legendY=legendY+14;_legendSpace+=20}}x=x+legendWidth}}c.font=font;return _legendSpace}function isStacked(chartType){return(chartType=="stackedbar")||(chartType=="hstackedbar")}function isH(chartType){return(chartType=="hbar")||(chartType=="hstackedbar")}function resizeCanvas(){var w=canWidth;if(resizeWidth){if(!isPercent(w)){w="100%"}}var h=canHeight;if(resizeHeight){if(!isPercent(h)){h="100%"}}updateSize(w,h);drawChart()}drawBar(myjson,idCan,idTipCan,canWidth,canHeight)};var lineChart=function(myjson,idCan,idTipCan,canWidth,canHeight){var obj;var data;var labels;var labelOrientation;var globalAlpha;var showGridX;var showGridY;var background;var message;var tickCount;var showTicks;var chartType;var chartStyle;var seriesColor;var xData,yData;var series;var yStep;var maxK=new Array();var minK=new Array();var dotsK=new Array();var max;var min;var tickStep;var minValY;var maxValY;var step=0;var gap=40;var hStep=60;var titleSpace=0;var legendSpace=0;var xLegendSpace=0;var yLegendSpace=0;var xaxisY=0;var realWidth;var realHeight;var canvas;var c;var tipCanvas;var H=6;var dotRadius=3;var tickInit;var resizeWidth=false;var resizeHeight=false;function drawLine(myjson,idCan,idTipCan,canWidth,canHeight){canvas=document.getElementById(idCan);tipCanvas=document.getElementById(idTipCan);c=canvas.getContext("2d");obj=myjson;chartType=obj.type;if(typeof chartType==="undefined"){chartType="line"}background=obj.background;if(typeof background==="undefined"){background="white"}chartStyle=obj.style;if(typeof chartStyle==="undefined"){chartStyle="normal"}data=obj.data[0];series=obj.data.length;labels=obj.labels;if(typeof labels==="undefined"){labels=[];for(var i=0;i<data.length;i++){labels.push("")}}labelOrientation=obj.labelOrientation;if(typeof labelOrientation==="undefined"){labelOrientation="horizontal"}globalAlpha=obj.alpha;if(typeof globalAlpha==="undefined"){globalAlpha=0.8}showTicks=obj.showTicks;if(typeof showTicks==="undefined"){showTicks=true}showGridX=obj.showGridX;if(typeof showGridX==="undefined"){showGridX=true}showGridY=obj.showGridY;if(typeof showGridY==="undefined"){showGridY=true}message=obj.message;if(typeof message==="undefined"){message="#val"}tickCount=obj.tickCount;if(typeof tickCount==="undefined"){tickCount=5}seriesColor=obj.color;if(typeof seriesColor==="undefined"){seriesColor=distinctHexColors(series)}for(var k=0;k<series;k++){maxK[k]=Math.max.apply(Math,obj.data[k]);minK[k]=Math.min.apply(Math,obj.data[k])}max=Math.max.apply(Math,maxK);min=Math.min.apply(Math,minK);var objStep=calculateYStep(min,max,tickCount);yStep=objStep.yStep;minValY=objStep.minValY;maxValY=objStep.maxValY;hStep=computeHStep();updateSize(canWidth,canHeight);canvas.addEventListener("mousemove",function(evt){var hme=Object.create(handleMouseEvent);hme.mousePos=getMousePos(canvas,evt);hme.tooltip=getTooltip(hme.mousePos);hme.execute(canvas,tipCanvas,evt)},false);canvas.addEventListener("click",onClick,false);if(resizeWidth||resizeHeight){window.addEventListener("resize",resizeCanvas,false)}drawChart()}function updateSize(canWidth,canHeight){if(canWidth!==undefined){if(isPercent(canWidth)){var percent=canWidth.substring(0,canWidth.length-1);var cl=canvas.parentNode;canvas.width=cl.offsetWidth*percent/100;resizeWidth=true}else{canvas.width=canWidth}}if(canHeight!==undefined){if(isPercent(canHeight)){var percent=canHeight.substring(0,canHeight.length-1);var cl=canvas.parentNode;canvas.height=cl.offsetHeight*percent/100;resizeHeight=true}else{canvas.height=canHeight}}realWidth=canvas.width;realHeight=canvas.height;gap=realWidth/10-10;tickInit=realHeight/12;tickStep=(realHeight-step-tickInit)/tickCount}function animDraw(){if(drawIt(H)){return false}H+=1+(realHeight-step-titleSpace-legendSpace)/30;window.requestAnimFrame(animDraw)}function drawIt(H){drawInit();var stop=drawData(true,false,"");drawGrid();drawAxis();return stop}function drawData(withFill,withClick,mousePos){var font=c.font;c.lineWidth=1;var stop=true;for(var k=0;k<series;k++){dotsK[k]=[];for(var i=0;i<data.length;i++){var dp=obj.data[k][i];var width=(realWidth-hStep-gap*(1+Math.sqrt(series)))/data.length;var dotX=hStep+i*(realWidth-hStep)/data.length+width/2;var Yheight=realHeight-step-(dp-minValY)*tickStep/yStep;var dotY=realHeight-step-H;var dotX2=dotX;var dotY2=dotY;var Yheight2=Yheight;if(i<data.length-1){dotX2=hStep+(i+1)*(realWidth-hStep)/data.length+width/2;dotY2=realHeight-step-H;Yheight2=realHeight-step-(obj.data[k][i+1]-minValY)*tickStep/yStep}if(dotY<=Yheight){dotY=Yheight}else{stop=false}if(dotY+2>xaxisY){dotY=xaxisY-1}if(i<data.length-1){if(dotY2<=Yheight2){dotY2=Yheight2}else{stop=false}if(dotY2+2>xaxisY){dotY2=xaxisY-1}}dotsK[k].push({x:dotX,y:dotY});var savedStroke=c.strokeStyle;if((chartStyle=="normal")||(chartType=="area")){dotRadius=2}drawLineElements(c,chartStyle,chartType,dotRadius,seriesColor,dotsK,data.length,xaxisY,globalAlpha,k,i,dotX,dotY,dotX2,dotY2,withFill);c.strokeStyle=savedStroke;if(!withFill){if(c.isPointInPath(mousePos.x,mousePos.y)){var tValue=obj.data[k][i];if(obj.tooltipPattern!==undefined){tValue=formatNumber(tValue,obj.tooltipPattern.decimals,obj.tooltipPattern.decimalSeparator,obj.tooltipPattern.thousandSeparator)}if(withClick){return tValue}else{var mes=String(message).replace("#val",tValue);canvas.style.cursor="pointer";return mes}}else{canvas.style.cursor="default"}}}}if(withFill){return stop}else{return""}}function drawInit(){var font=c.font;c.fillStyle=background;c.fillRect(0,0,realWidth,realHeight);var xLabelWidth=computeVStep();if(typeof obj.title!=="undefined"){var titleColor=obj.title.color;if(titleColor===undefined){titleColor="#000000"}c.fillStyle=titleColor;var b=" ";var f=obj.title.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}c.font=f.weight+b+f.size+"px"+b+f.family;titleSpace=+20+ +f.size;var alignment=obj.title.alignment;if(alignment===undefined){alignment="center"}var xTitle;if(alignment=="left"){xTitle=hStep}else{if(alignment=="right"){xTitle=canvas.width-c.measureText(obj.title.text).width-10}else{xTitle=canvas.width/2-c.measureText(obj.title.text).width/2}}c.fillText(obj.title.text,xTitle,20+titleSpace/2);c.font=font}else{titleSpace=10}if(typeof obj.xLegend!=="undefined"){var xLegendColor=obj.xLegend.color;if(xLegendColor===undefined){xLegendColor="#000000"}c.fillStyle=xLegendColor;var b=" ";var f=obj.xLegend.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}c.font=f.weight+b+f.size+"px"+b+f.family;xLegendSpace=+20+ +f.size;c.fillText(obj.xLegend.text,realWidth/2-c.measureText(obj.xLegend.text).width/2,realHeight-f.size);c.font=font}else{xLegendSpace=0}if(typeof obj.yLegend!=="undefined"){var yLegendColor=obj.yLegend.color;if(yLegendColor===undefined){yLegendColor="#000000"}var b=" ";var f=obj.yLegend.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}c.font=f.weight+b+f.size+"px"+b+f.family;c.fillStyle=yLegendColor;c.save();c.translate(10,realHeight/2);c.rotate(-Math.PI/2);c.textAlign="center";c.fillText(obj.yLegend.text,0,f.size);c.restore();c.font=font}else{yLegendSpace=0}if(typeof obj.legend!=="undefined"){var x=hStep;c.font="bold 10px sans-serif";legendSpace=20;var legendY=titleSpace+20;c.globalAlpha=globalAlpha;for(var k=0;k<series;k++){c.fillStyle=seriesColor[k];var legendWidth=c.measureText(obj.legend[k]).width+24;if(x+legendWidth>realWidth){x=hStep;legendY=legendY+14;legendSpace+=20}c.fillText("---- "+obj.legend[k],x,legendY);x=x+legendWidth}c.globalAlpha=1;c.font=font}c.font=font;tickStep=(realHeight-step-titleSpace-legendSpace-tickInit)/tickCount;xaxisY=tickCount*tickStep+tickInit+titleSpace+legendSpace;drawLabels(xLabelWidth)}function drawLabels(xLabelWidth){var font=c.font;if(showTicks){c.fillStyle="black";if(obj.yData!==undefined){c.fillStyle=obj.yData.color;var b=" ";var yfont=obj.yData.font;c.font=yfont.weight+b+yfont.size+"px"+b+yfont.family}for(var i=0;i<tickCount+1;i++){var label;if(obj.tooltipPattern!==undefined){var decimals=obj.tooltipPattern.decimals;var exp=Math.pow(10,decimals);label=Math.round((maxValY-i*yStep)*exp)/exp}else{label=Math.round((maxValY-i*yStep)*100)/100}var labelWidth=c.measureText(label).width;c.fillText(label+"",hStep-15-labelWidth,i*tickStep+tickInit+titleSpace+legendSpace);c.lineWidth=2;c.beginPath();c.moveTo(hStep-15,i*tickStep+tickInit+titleSpace+legendSpace);c.lineTo(hStep-10,i*tickStep+tickInit+titleSpace+legendSpace);c.closePath();c.stroke()}c.font=font}c.fillStyle="black";if(obj.xData!==undefined){c.fillStyle=obj.xData.color;var b=" ";var xfont=obj.xData.font;c.font=xfont.weight+b+xfont.size+"px"+b+xfont.family}for(var i=0;i<labels.length;i++){var middleX=hStep+i*(realWidth-hStep)/data.length+(realWidth-hStep-gap*(1+Math.sqrt(series)))/data.length/2;var xLabelSpace=computeXLabelSpace(labels[i]);if(labelOrientation=="vertical"){c.save();c.translate(middleX-c.measureText(labels[i]).width/2,realHeight-step/2-xLegendSpace/2);c.rotate(-Math.PI/2);c.textAlign="center";c.fillText(labels[i],0,c.measureText(labels[i]).width/2+6);c.restore()}else{if(labelOrientation=="diagonal"){c.save();c.translate(middleX-c.measureText(labels[i]).width/2,realHeight-step/2-xLegendSpace/2-5);c.rotate(-Math.PI/4);c.textAlign="center";c.fillText(labels[i],0,16);c.restore()}else{if(labelOrientation=="halfdiagonal"){c.save();c.translate(middleX-c.measureText(labels[i]).width/2,realHeight-step+10);c.rotate(-Math.PI/8);c.textAlign="center";c.fillText(labels[i],0,16);c.restore()}else{c.fillText(labels[i],middleX-c.measureText(labels[i]).width/2,realHeight-step/2-xLegendSpace/4)}}}}c.font=font}function drawGrid(){if(showGridY){for(var i=0;i<tickCount+1;i++){var xColor=c.strokeStyle;if(obj.colorGridY!=="undefined"){c.strokeStyle=obj.colorGridY}c.lineWidth=0.2;c.beginPath();c.moveTo(hStep-10,i*tickStep+tickInit+titleSpace+legendSpace);c.lineTo(realWidth-10,i*tickStep+tickInit+titleSpace+legendSpace);c.closePath();c.stroke();c.lineWidth=2;c.strokeStyle=xColor}}if(showGridX){for(var i=0;i<labels.length;i++){var middleX=hStep+i*(realWidth-hStep)/data.length+(realWidth-hStep-gap*(1+Math.sqrt(series)))/data.length/2;var yColor=c.strokeStyle;if(obj.colorGridX!=="undefined"){c.strokeStyle=obj.colorGridX}c.lineWidth=0.2;c.beginPath();c.moveTo(middleX,10+titleSpace+legendSpace);c.lineTo(middleX,realHeight-step);c.closePath();c.stroke();c.lineWidth=2;c.strokeStyle=yColor}}}function drawAxis(){c.fillStyle="black";c.lineWidth=2;var axisColor=c.strokeStyle;if(obj.colorYaxis!=="undefined"){c.strokeStyle=obj.colorYaxis}c.beginPath();c.moveTo(hStep-10,titleSpace+legendSpace);c.lineTo(hStep-10,realHeight-step);c.closePath();c.stroke();if(obj.colorXaxis!=="undefined"){c.strokeStyle=obj.colorXaxis}c.beginPath();c.moveTo(hStep-10,realHeight-step);c.lineTo(realWidth-5,realHeight-step);c.closePath();c.stroke();c.strokeStyle=axisColor}function getTooltip(mousePos){return drawData(false,false,mousePos)}function onClick(evt){var v=drawData(false,true,getMousePos(canvas,evt));if((v!=="")&&(obj.onClick!==undefined)){var f=obj.onClick;eval(f);doClick(v)}return v}function drawChart(){window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1000/60)}})();window.requestAnimFrame(animDraw)}function computeHStep(){var result;var font=c.font;if(showTicks){var maxLabelWidth=0;if(typeof obj.yData!=="undefined"){var yfont=obj.yData.font;var b=" ";c.font=yfont.weight+b+yfont.size+"px"+b+yfont.family}for(var i=0;i<tickCount+1;i++){var label=Math.round((maxValY-i*yStep)*100)/100;var labelWidth=c.measureText(label).width;if(labelWidth>maxLabelWidth){maxLabelWidth=labelWidth}}result=maxLabelWidth+20}else{result=20}c.font=font;if(typeof obj.yLegend!=="undefined"){var b=" ";var f=obj.yLegend.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}c.font=f.weight+b+f.size+"px"+b+f.family;yLegendSpace=+20+ +f.size;c.font=font;result+=yLegendSpace}return result}function computeVStep(){var xLabelWidth=0;if(typeof obj.xData!=="undefined"){var xfont=obj.xData.font;var b=" ";c.font=xfont.weight+b+xfont.size+"px"+b+xfont.family}for(var i=0;i<labels.length;i++){var labelWidth=computeXLabelSpace(labels[i]);if(labelWidth>xLabelWidth){xLabelWidth=labelWidth}}var _xLegendSpace=0;if(typeof obj.xLegend!=="undefined"){var f=obj.xLegend.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}_xLegendSpace=+20+ +f.size}if(step<xLabelWidth+_xLegendSpace){step=xLabelWidth+_xLegendSpace}return xLabelWidth}function computeXLabelSpace(label){var _labelWidth=c.measureText(label).width+10;if(labelOrientation==="horizontal"){if(typeof obj.xData!=="undefined"){_labelWidth=obj.xData.font.size+20}else{_labelWidth=12+20}}else{if(labelOrientation==="halfdiagonal"){_labelWidth=c.measureText(label).width*Math.sin(Math.PI/8)+20}else{if(labelOrientation==="diagonal"){_labelWidth=c.measureText(label).width*Math.sin(Math.PI/4)+20}}}return _labelWidth}function getTitleSpace(){var space=10;if(typeof obj.title!=="undefined"){var f=obj.title.font;if(f===undefined){f.size=12}space=+20+ +f.size}return space}function getXLegendSpace(){var _xLegendSpace=0;if(typeof obj.xLegend!=="undefined"){var f=obj.xLegend.font;if(f===undefined){f.size=12}_xLegendSpace=+20+ +f.size}return _xLegendSpace}function getLegendSpace(){var font=c.font;var _legendSpace=20;if(typeof obj.legend!=="undefined"){var x=hStep;c.font="bold 10px sans-serif";var legendY=getTitleSpace()+20;for(var k=0;k<series;k++){var legendWidth=c.measureText(obj.legend[k]).width+24;if(x+legendWidth>realWidth){x=hStep;legendY=legendY+14;_legendSpace+=20}x=x+legendWidth}}c.font=font;return _legendSpace}function resizeCanvas(){var w=canWidth;if(resizeWidth){if(!isPercent(w)){w="100%"}}var h=canHeight;if(resizeHeight){if(!isPercent(h)){h="100%"}}updateSize(w,h);drawChart()}drawLine(myjson,idCan,idTipCan,canWidth,canHeight)};function getLineY(a,d,e,c){var f,b;if(a==d){f=a;b=d}else{if(a>d){f=a-c*Math.sin(e);b=d+c*Math.sin(e)}else{if(a<d){f=a+c*Math.sin(e);b=d-c*Math.sin(e)}}}return{y:f,y2:b}}function drawDot(g,d,b,a,e,f){g.beginPath();g.arc(b,a,e,0,Math.PI*2,true);if(f){if(d=="hollowdot"){g.stroke()}else{g.fill()}}}function drawBow(g,b,a,e){var f=4;g.beginPath();g.moveTo(b,a);g.lineTo(b-f,a-f);g.lineTo(b+f,a-f);g.lineTo(b-f,a+f);g.lineTo(b+f,a+f);g.lineTo(b,a);if(e){g.stroke()}}function drawAnchor(g,b,a,e){var f=8;g.beginPath();g.moveTo(b-f/2,a+Math.sqrt(3)*f/6);g.lineTo(b,a-2*Math.sqrt(3)*f/6);g.lineTo(b+f/2,a+Math.sqrt(3)*f/6);g.lineTo(b-f/2,a+Math.sqrt(3)*f/6);if(e){g.stroke()}}function drawStar(j,b,h,e,g,a,f){j.save();j.beginPath();j.translate(b,h);j.moveTo(0,0-e);for(var d=0;d<g;d++){j.rotate(Math.PI/g);j.lineTo(0,0-(e*a));j.rotate(Math.PI/g);j.lineTo(0,0-e)}if(f){j.stroke()}j.restore()}function drawLineElements(v,z,g,d,b,A,h,s,r,p,q,w,u,f,o,l){var t=d+2;var j,a,e;if(q<h-1){e=Math.atan(Math.abs(o-u)/Math.abs(f-w))}var m=getLineY(u,o,e,t);v.strokeStyle=b[p];v.fillStyle=b[p];if(q<h-1){v.beginPath();v.moveTo(w+t*Math.cos(e),m.y);v.lineTo(f-t*Math.cos(e),m.y2)}else{if(g=="area"){v.strokeStyle=colorLuminance(b[p],1.3);v.beginPath();for(var q=0;q<A[p].length;q++){var n=A[p][q];if(q==0){v.moveTo(n.x,n.y)}else{v.lineTo(n.x,n.y)}}v.lineTo(w,s);v.lineTo(A[p][0].x,s);v.lineTo(A[p][0].x,A[p][0].y);v.closePath();if(l){v.globalAlpha=r;v.fill();v.globalAlpha=1}}}if(l){if(w!=f){v.lineWidth=2;v.stroke()}}v.lineWidth=1;if((z=="normal")||(z=="soliddot")||(z=="hollowdot")){drawDot(v,z,w,u,d,l)}else{if(z=="bowdot"){drawBow(v,w,u,l)}else{if(z=="anchordot"){drawAnchor(v,w,u,l)}else{if(z=="stardot"){drawStar(v,w,u,5,5,0.5,l)}}}}}var pieChart=function(myjson,idCan,idTipCan,canWidth,canHeight){var obj;var data;var labels;var globalAlpha;var background;var message;var chartType;var seriesColor;var titleSpace=0;var realWidth;var realHeight;var canvas;var c;var tipCanvas;var H=6;var line=20;var hline=5;var resizeWidth=false;var resizeHeight=false;function drawPie(myjson,idCan,idTipCan,canWidth,canHeight){canvas=document.getElementById(idCan);tipCanvas=document.getElementById(idTipCan);c=canvas.getContext("2d");obj=myjson;chartType=obj.type;if(typeof chartType==="undefined"){chartType="pie"}background=obj.background;if(typeof background==="undefined"){background="white"}data=obj.data[0];labels=obj.labels;globalAlpha=obj.alpha;if(typeof globalAlpha==="undefined"){globalAlpha=0.8}message=obj.message;if(typeof message==="undefined"){message="#val / #total<br>#percent% of 100%"}seriesColor=obj.color;if(typeof seriesColor==="undefined"){seriesColor=distinctHexColors(data.length)}if(seriesColor.length<data.length){seriesColor=seriesColor.concat(distinctHexColors(data.length-seriesColor.length))}updateSize(canWidth,canHeight);canvas.addEventListener("mousemove",function(evt){var hme=Object.create(handleMouseEvent);hme.mousePos=getMousePos(canvas,evt);hme.tooltip=getTooltip(hme.mousePos);hme.execute(canvas,tipCanvas,evt)},false);canvas.addEventListener("click",onClick,false);if(resizeWidth||resizeHeight){window.addEventListener("resize",resizeCanvas,false)}drawChart()}function updateSize(canWidth,canHeight){if(canWidth!==undefined){if(isPercent(canWidth)){var percent=canWidth.substring(0,canWidth.length-1);var cl=canvas.parentNode;canvas.width=cl.offsetWidth*percent/100;resizeWidth=true}else{canvas.width=canWidth}}if(canHeight!==undefined){if(isPercent(canHeight)){var percent=canHeight.substring(0,canHeight.length-1);var cl=canvas.parentNode;canvas.height=cl.offsetHeight*percent/100;resizeHeight=true}else{canvas.height=canHeight}}realWidth=canvas.width;realHeight=canvas.height}function animDraw(){if(drawIt(H)){return false}H+=1+(realHeight-titleSpace)/30;window.requestAnimFrame(animDraw)}function drawIt(H){drawInit();var stop=drawData(true,false,"");return stop}function drawData(withFill,withClick,mousePos){var font=c.font;c.lineWidth=1;var stop=true;var pieData=[];var cx=realWidth-2*getMaxLabelWidth()-2*line-20;var cy=realHeight-titleSpace-getLabelHeight()-2*line-20;var center=[realWidth/2,(realHeight+titleSpace)/2];var radius=Math.min(cx,cy)/2;if(radius<0){radius=20}var total=0;var lastPosition=0;for(var i in data){total+=data[i]}if(radius<H){H=radius}else{stop=false}for(var i in data){pieData[i]=[];pieData[i]["value"]=data[i];var percent=data[i]*100/total;pieData[i]["percent"]=Math.round(percent*100)/100;pieData[i]["startAngle"]=2*Math.PI*lastPosition;pieData[i]["endAngle"]=2*Math.PI*(lastPosition+(data[i]/total));pieData[i]["labelAngle"]=pieData[i]["startAngle"]+Math.abs(pieData[i]["endAngle"]-pieData[i]["startAngle"])/2;pieData[i]["middle"]=[center[0]+H*Math.cos(pieData[i]["labelAngle"]),center[1]+H*Math.sin(pieData[i]["labelAngle"])];lastPosition+=data[i]/total}for(var i=0;i<data.length;i++){if(withFill){var gradient=c.createLinearGradient(0,0,realWidth,realHeight);gradient.addColorStop(0,"#ddd");gradient.addColorStop(1,seriesColor[i]);c.beginPath();if(pieData.length>1){c.moveTo(center[0],center[1])}c.arc(center[0],center[1],H,pieData[i]["startAngle"],pieData[i]["endAngle"],false);if(pieData.length>1){c.lineTo(center[0],center[1])}c.closePath();c.fillStyle=gradient;c.fill();c.lineWidth=1;c.strokeStyle="#fff";c.stroke();if(typeof labels!=="undefined"){drawLabels(i,pieData)}}else{var fromCenterX=mousePos.x-center[0];var fromCenterY=mousePos.y-center[1];var fromCenter=Math.sqrt(Math.pow(Math.abs(fromCenterX),2)+Math.pow(Math.abs(fromCenterY),2));if(fromCenter<=radius){var angle=Math.atan2(fromCenterY,fromCenterX);if(angle<0){angle=2*Math.PI+angle}for(var slice in pieData){if(angle>=pieData[slice]["startAngle"]&&angle<=pieData[slice]["endAngle"]){var tValue=pieData[slice]["value"];if(obj.tooltipPattern!==undefined){tValue=formatNumber(tValue,obj.tooltipPattern.decimals,obj.tooltipPattern.decimalSeparator,obj.tooltipPattern.thousandSeparator)}if(withClick){return tValue}else{var mes=String(message).replace("#val",tValue);mes=mes.replace("#total",total);mes=mes.replace("#percent",pieData[slice]["percent"]);canvas.style.cursor="pointer";return mes}}else{canvas.style.cursor="default"}}}}}if(withFill){return stop}else{return""}}function drawLabels(i,pieData){var x=pieData[i]["middle"][0];var y=pieData[i]["middle"][1];var x1=x+line*Math.cos(pieData[i]["labelAngle"]);var y1=y+line*Math.sin(pieData[i]["labelAngle"]);c.beginPath();c.moveTo(x,y);c.lineTo(x1,y1);var writeFrom=true;if((pieData[i]["labelAngle"]==Math.PI)||(pieData[i]["labelAngle"]==2*Math.PI)){if((pieData[i]["labelAngle"]==Math.PI)||(pieData.length==1)){writeFrom=false}}else{if(pieData[i]["labelAngle"]<=Math.PI/2){x1=x1+hline}else{if(pieData[i]["labelAngle"]<Math.PI){x1=x1-hline;writeFrom=false}else{if(pieData[i]["labelAngle"]<=3*Math.PI/2){x1=x1-hline;writeFrom=false}else{if(pieData[i]["labelAngle"]<2*Math.PI){x1=x1+hline}}}}}c.lineTo(x1,y1);c.strokeStyle=seriesColor[i];c.stroke();c.fillStyle=seriesColor[i];var fontHeight=12;if(obj.xData!==undefined){var b=" ";var xfont=obj.xData.font;fontHeight=xfont.size;c.font=xfont.weight+b+xfont.size+"px"+b+xfont.family}else{c.font="bold 12px sans-serif"}if(writeFrom){c.fillText(labels[i],x1+5,y1+fontHeight/2)}else{var size=c.measureText(labels[i]).width+5;c.fillText(labels[i],x1-size,y1+fontHeight/2)}}function drawInit(){var font=c.font;c.fillStyle=background;c.fillRect(0,0,realWidth,realHeight);if(typeof obj.title!=="undefined"){var titleColor=obj.title.color;if(titleColor===undefined){titleColor="#000000"}c.fillStyle=titleColor;var b=" ";var f=obj.title.font;if(f===undefined){f.weight="bold";f.size=12;f.family="sans-serif"}c.font=f.weight+b+f.size+"px"+b+f.family;titleSpace=+20+ +f.size;var alignment=obj.title.alignment;if(alignment===undefined){alignment="center"}var xTitle;if(alignment=="left"){xTitle=hStep}else{if(alignment=="right"){xTitle=canvas.width-c.measureText(obj.title.text).width-10}else{xTitle=canvas.width/2-c.measureText(obj.title.text).width/2}}c.fillText(obj.title.text,xTitle,20+titleSpace/2);c.font=font}else{titleSpace=0}c.font=font}function getTooltip(mousePos){return drawData(false,false,mousePos)}function onClick(evt){var v=drawData(false,true,getMousePos(canvas,evt));if((v!=="")&&(obj.onClick!==undefined)){var f=obj.onClick;eval(f);doClick(v)}return v}function drawChart(){window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){window.setTimeout(callback,1000/60)}})();window.requestAnimFrame(animDraw)}function getTitleSpace(){var space=0;if(typeof obj.title!=="undefined"){var f=obj.title.font;if(f===undefined){f.size=12}space=+20+ +f.size}return space}function getLabelHeight(){var fontHeight=12;if(obj.xData!==undefined){fontHeight=obj.xData.font.size}return fontHeight}function getMaxLabelWidth(){if(typeof labels==="undefined"){return 0}var font=c.font;var max=0;if(obj.xData!==undefined){var b=" ";var xfont=obj.xData.font;fontHeight=xfont.size;c.font=xfont.weight+b+xfont.size+"px"+b+xfont.family}else{c.font="bold 12px sans-serif"}for(var i=0;i<labels.length;i++){var size=c.measureText(labels[i]).width+5;if(size>max){max=size}}c.font=font;return max}function resizeCanvas(){var w=canWidth;if(resizeWidth){if(!isPercent(w)){w="100%"}}var h=canHeight;if(resizeHeight){if(!isPercent(h)){h="100%"}}updateSize(w,h);drawChart()}drawPie(myjson,idCan,idTipCan,canWidth,canHeight)};function nextChart(e,a,b){var d=document.getElementById(a);var c=document.getElementById(b);nextChart(e,a,b,d.width,d.height)}function nextChart(g,a,c,f,e){var b=g.type;if(typeof b==="undefined"){b="line"}if((f==="100%")&&(e==="100%")){var d=document.getElementById(a);d.width=$(window).width();d.height=$(window).height()}if(isBar(b)){barChart(g,a,c,f,e)}else{if(isPie(b)){pieChart(g,a,c,f,e)}else{lineChart(g,a,c,f,e)}}}function isBar(a){return(a=="bar")||(a=="hbar")||(a=="stackedbar")||(a=="hstackedbar")}function isLine(a){return(a=="line")||(a=="area")}function isPie(a){return(a=="pie")};